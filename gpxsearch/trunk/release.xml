<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="create_run_jar" name="Create Runnable Jar for Project gpxsearch with Jar-in-Jar Loader">
    <!--this file was created by Eclipse Runnable JAR Export Wizard-->
    <!--ANT 1.7 is required                                        -->
	<!-- if you want to build PQ Libre with other versions of the dependencies than what is listed here you must edit this file. -->
    <target name="create_run_jar">
        <jar destfile="build/pqlibre.jar">
            <manifest>
                <attribute name="Main-Class" value="org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader"/>
                <attribute name="Rsrc-Main-Class" value="org.gpssearch.Exporter"/>
                <attribute name="Class-Path" value="."/>
                <attribute name="Rsrc-Class-Path" value="./ org.eclipse.osgi_3.7.2.dist.jar org.eclipse.core.commands_3.6.0.dist.jar org.eclipse.equinox.common_3.6.0.dist.jar org.eclipse.equinox.registry_3.5.101.dist.jar org.eclipse.core.runtime_3.7.0.dist.jar org.eclipse.text_3.5.101.dist.jar org.eclipse.jface_3.7.0.dist.jar org.eclipse.jface.text_3.7.2.dist.jar org.eclipse.ui.workbench_3.7.1.dist.jar com.ibm.icu_4.4.2.v20110823.jar org.eclipse.ui.forms_3.5.101.dist.jar org.hamcrest.core_1.1.0.jar swt.jar"/>
            </manifest>
            <zipfileset src="jar-in-jar-loader.zip"/>
            <fileset dir="bin"/>
            <fileset dir="." includes="icon*.png"/>
            <fileset dir="." includes="diftersiz.db"/>
            <zipfileset dir="/usr/lib/eclipse/plugins" includes="org.eclipse.osgi_3.7.2.dist.jar"/>
            <zipfileset dir="/usr/lib/eclipse/plugins" includes="org.eclipse.core.commands_3.6.0.dist.jar"/>
            <zipfileset dir="/usr/lib/eclipse/plugins" includes="org.eclipse.equinox.common_3.6.0.dist.jar"/>
            <zipfileset dir="/usr/lib/eclipse/plugins" includes="org.eclipse.equinox.registry_3.5.101.dist.jar"/>
            <zipfileset dir="/usr/lib/eclipse/plugins" includes="org.eclipse.core.runtime_3.7.0.dist.jar"/>
            <zipfileset dir="/usr/lib/eclipse/plugins" includes="org.eclipse.text_3.5.101.dist.jar"/>
            <zipfileset dir="/usr/lib/eclipse/plugins" includes="org.eclipse.jface_3.7.0.dist.jar"/>
            <zipfileset dir="/usr/lib/eclipse/plugins" includes="org.eclipse.jface.text_3.7.2.dist.jar"/>
            <zipfileset dir="/usr/lib/eclipse/plugins" includes="org.eclipse.ui.workbench_3.7.1.dist.jar"/>
            <zipfileset dir="/usr/lib/eclipse/plugins" includes="com.ibm.icu_4.4.2.v20110823.jar"/>
            <zipfileset dir="/usr/lib/eclipse/plugins" includes="org.eclipse.ui.forms_3.5.101.dist.jar"/>
            <fileset dir="../geoscrape/bin">
            	  <patternset id="non.test.binaries">
            	    <exclude name="**/*Test*"/>
            	  </patternset>
            	</fileset>
            <zipfileset dir="/usr/lib/eclipse/dropins/jdt/plugins" includes="org.hamcrest.core_1.1.0.jar"/>
        </jar>
    	<!-- create the various distributions by adding the relevant swt.jar file -->
    	<!-- 32-bit Windows -->
    	<copy file="build/pqlibre.jar" tofile="build/pqlibre-win32.jar" overwrite="true"/>
    	<unzip src="libs/swt-4.2-win32-win32-x86.zip" dest="libs/tmp/"/>
    	<zip basedir="libs/tmp/" includes="swt.jar" update="true" destfile="build/pqlibre-win32.jar"/>
    	<delete dir="libs/tmp/"/>
    	
    	<!-- 64-bit Windows-->
    	<copy file="build/pqlibre.jar" tofile="build/pqlibre-win64.jar" overwrite="true"/>
    	<unzip src="libs/swt-4.2-win32-win32-x86_64.zip" dest="libs/tmp/"/>
    	<zip basedir="libs/tmp/" includes="swt.jar" update="true" destfile="build/pqlibre-win64.jar"/>
    	<delete dir="libs/tmp/"/>
    	
    	<!-- 32-bit Linux -->
    	<copy file="build/pqlibre.jar" tofile="build/pqlibre-linux32.jar" overwrite="true"/>
    	<unzip src="libs/swt-4.2-gtk-linux-x86.zip" dest="libs/tmp/"/>
    	<zip basedir="libs/tmp/" includes="swt.jar" update="true" destfile="build/pqlibre-linux32.jar"/>
    	<delete dir="libs/tmp/"/>
    	
    	<!-- 64-bit Linux -->
    	<copy file="build/pqlibre.jar" tofile="build/pqlibre-linux64.jar" overwrite="true"/>
    	<unzip src="libs/swt-4.2-gtk-linux-x86_64.zip" dest="libs/tmp/"/>
    	<zip basedir="libs/tmp/" includes="swt.jar" update="true" destfile="build/pqlibre-linux64.jar"/>
    	<delete dir="libs/tmp/"/>
    	
    	<!-- PowerPC Linux -->
    	<copy file="build/pqlibre.jar" tofile="build/pqlibre-linuxppc.jar" overwrite="true"/>
    	<unzip src="libs/swt-4.2-gtk-linux-ppc64.zip" dest="libs/tmp/"/>
    	<zip basedir="libs/tmp/" includes="swt.jar" update="true" destfile="build/pqlibre-linuxppc.jar"/>
    	<delete dir="libs/tmp/"/>
    </target>
</project>